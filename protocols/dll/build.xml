<?xml version="1.0" encoding="UTF-8"?>
<!--
 *	$Revision: 6757 $
 *	$Date: 2010-08-25 13:25:44 +0200 (Mi, 25 Aug 2010) $
 *
 *  Copyright (c) 2005-2012 David Kocher. All rights reserved.
 *  http://cyberduck.io/
 *
 *	This program is free software; you can redistribute it and/or modify
 *	it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation; either version 2 of the License, or
 *	(at your option) any later version.package
 *
 *	This program is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *	GNU General Public License for more details.
 *
 *	Bug fixes, suggestions and comments should be sent to:
 *	dkocher@cyberduck.io
 -->
<project name="Cyberduck Native Libraries" basedir=".">

    <import file="../../build.xml"/>

    <property name="ikvm.home" value="${build}/ikvm"/>

    <target name="dll" if="platform.windows">
        <taskdef name="ikvmc" classname="net.ikvm.ant.IkvmcTask">
            <classpath path="${lib.ext}/ant-ikvmc.0.5.jar"/>
        </taskdef>
        <mkdir dir="${build}"/>
        <!-- Create DLL Cyberduck.Protocols -->
        <ikvmc target="library" out="${build}/Cyberduck.Protocols.dll" home="${ikvm.home}"
               classloader="ikvm.runtime.AppDomainAssemblyClassLoader" version="${version}.${revision}" debug="${ikvm.debug}"
               verbose="false">
            <reference path="${build}/Cyberduck.Core.dll"/>
            <arg value="-skipDuplicates"/>
            <fileset dir="${build}">
                <include name="annotations.jar" />
                <include name="aopalliance-repackaged.jar" />
                <include name="apache-http-client-signature.jar" />
                <include name="asn-one.jar" />
                <include name="aws-java-sdk-cloudfront.jar" />
                <include name="aws-java-sdk-core.jar" />
                <include name="aws-java-sdk-iam.jar" />
                <include name="aws-java-sdk-kms.jar" />
                <include name="aws-java-sdk-s3.jar" />
                <include name="aws-java-sdk-sts.jar" />
                <include name="azure-keyvault-core.jar" />
                <include name="azure-storage.jar" />
                <include name="azure.jar" />
                <include name="b2.jar" />
                <include name="backblaze.jar" />
                <include name="box.jar" />
                <include name="brick.jar" />
                <include name="cloning.jar" />
                <include name="commons-lang.jar" />
                <include name="ctera.jar" />
                <include name="dracoon-crypto-sdk.jar" />
                <include name="dracoon.jar" />
                <include name="dropbox-core-sdk.jar" />
                <include name="dropbox.jar" />
                <include name="ds3-interfaces.jar" />
                <include name="ds3-sdk.jar" />
                <include name="ds3-utils.jar" />
                <include name="eddsa.jar" />
                <include name="eue.jar" />
                <include name="freenet.jar" />
                <include name="ftp.jar" />
                <include name="google-api-client.jar" />
                <include name="google-api-services-drive.jar" />
                <include name="google-api-services-storage.jar" />
                <include name="google-http-client-apache-v2.jar" />
                <include name="google-http-client-gson.jar" />
                <include name="google-http-client.jar" />
                <include name="google-oauth-client.jar" />
                <include name="googledrive.jar" />
                <include name="googlestorage.jar" />
                <include name="grpc-context.jar" />
                <include name="hk2-api.jar" />
                <include name="hk2-locator.jar" />
                <include name="hk2-utils.jar" />
                <include name="http-signature-common.jar" />
                <include name="hubic.jar" />
                <include name="ion-java.jar" />
                <include name="irods.jar" />
                <include name="istack-commons-runtime.jar" />
                <include name="jackson-annotations.jar" />
                <include name="jackson-core.jar" />
                <include name="jackson-databind.jar" />
                <include name="jackson-dataformat-cbor.jar" />
                <include name="jackson-dataformat-xml.jar" />
                <include name="jackson-datatype-joda.jar" />
                <include name="jackson-datatype-jsr310.jar" />
                <include name="jackson-jaxrs-base.jar" />
                <include name="jackson-jaxrs-json-provider.jar" />
                <include name="jackson-module-jaxb-annotations.jar" />
                <include name="jakarta.activation-api.jar" />
                <include name="jakarta.activation.jar" />
                <include name="jakarta.annotation-api.jar" />
                <include name="jakarta.inject.jar" />
                <include name="jakarta.ws.rs-api.jar" />
                <include name="jakarta.xml.bind-api.jar" />
                <include name="jargon-core.jar" />
                <include name="java-manta-client-unshaded.jar" />
                <include name="java-uuid-generator.jar" />
                <include name="javassist.jar" />
                <include name="jaxb-runtime.jar" />
                <include name="jcl-over-slf4j.jar" />
                <include name="jersey-apache-connector.jar" />
                <include name="jersey-client.jar" />
                <include name="jersey-common.jar" />
                <include name="jersey-entity-filtering.jar" />
                <include name="jersey-hk2.jar" />
                <include name="jersey-media-json-jackson.jar" />
                <include name="jersey-media-multipart.jar" />
                <include name="jersey.jar" />
                <include name="jmespath-java.jar" />
                <include name="joda-time.jar" />
                <include name="jsch.agentproxy.core.jar" />
                <include name="jsch.agentproxy.pageant.jar" />
                <include name="jsch.agentproxy.sshagent.jar" />
                <include name="jsch.agentproxy.sshj.jar" />
                <include name="jsch.agentproxy.usocket-jna.jar" />
                <include name="json.jar" />
                <include name="jzlib.jar" />
                <include name="kotlin-stdlib-common.jar" />
                <include name="kotlin-stdlib.jar" />
                <include name="manta.jar" />
                <include name="metrics-core.jar" />
                <include name="metrics-jmx.jar" />
                <include name="migbase64.jar" />
                <include name="mimepull.jar" />
                <include name="minimal-json.jar" />
                <include name="nextcloud.jar" />
                <include name="nio.jar" />
                <include name="oauth.jar" />
                <include name="objenesis.jar" />
                <include name="onedrive-java-client.jar" />
                <include name="onedrive.jar" />
                <include name="opencensus-api.jar" />
                <include name="opencensus-contrib-http-util.jar" />
                <include name="openstack.jar" />
                <include name="osgi-resource-locator.jar" />
                <include name="owncloud.jar" />
                <include name="s3.jar" />
                <include name="sardine.jar" />
                <include name="spectra.jar" />
                <include name="ssh.jar" />
                <include name="sshj.jar" />
                <include name="stax2-api.jar" />
                <include name="storegate.jar" />
                <include name="swagger-annotations.jar" />
                <include name="swift.jar" />
                <include name="txw2.jar" />
                <include name="urlbuilder.jar" />
                <include name="webdav.jar" />
                <include name="woodstox-core.jar" />
            </fileset>
            <outputfilter>
                <contains>IKVMC0109</contains>
                <contains>class is already available in referenced assembly</contains>
            </outputfilter>
        </ikvmc>

        <taskdef name="msbuild" classname="org.apache.ant.dotnet.build.MSBuildTask">
            <classpath path="${lib.ext}/ant-dotnet-1.1.jar"/>
        </taskdef>
    </target>

    <target name="build" depends="version,dll" />
</project>
